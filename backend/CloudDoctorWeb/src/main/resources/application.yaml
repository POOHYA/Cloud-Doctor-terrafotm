# ==========================================
# Spring Boot 기본 설정
# ==========================================
spring:
  application:
    name: CloudDoctorWeb  # 애플리케이션 이름

  # ==========================================
  # 데이터베이스 설정 (PostgreSQL)
  # ==========================================
  datasource:
    url: ${PGSQL_URL}                          # PostgreSQL JDBC URL
    username: ${PGSQL_USERNAME}                # PostgreSQL 접속 계정
    password: ${PGSQL_PASSWORD}                # PostgreSQL 비밀번호
    driver-class-name: org.postgresql.Driver   # PostgreSQL 드라이버

  # ==========================================
  # Redis 캐시 설정
  # ==========================================
  data:
    redis:
      port: ${REDIS_PORT}         # Redis 포트 번호
      host: ${REDIS_HOST}         # Redis 호스트 주소
      password: ${REDIS_PASSWORD} # Redis 인증 비밀번호

  # ==========================================
  # Jackson JSON 직렬화/역직렬화 설정
  # ==========================================
  jackson:
    serialization:
      write-dates-as-timestamps: false              # 날짜를 타임스탬프가 아닌 문자열로 직렬화
    deserialization:
      fail-on-unknown-properties: false             # 알 수 없는 속성이 있어도 역직렬화 실패하지 않음
    time-zone: Asia/Seoul                           # 타임존 설정 (한국 시간)
    date-format: yyyy-MM-dd HH:mm:ss                # 날짜 포맷
    default-property-inclusion: non_null            # null 값은 JSON 응답에서 제외

# ==========================================
# 서버 포트 설정
# ==========================================
server:
  port: 9090  # 백엔드 애플리케이션 포트

# ==========================================
# JPA/Hibernate 설정
# ==========================================
jpa:
  hibernate:
    ddl-auto: validate  # 스키마 검증만 수행 (변경하지 않음, Flyway가 마이그레이션 담당)
  show-sql: false       # SQL 쿼리 로그 출력 비활성화 (개발 시 true로 변경 가능)
  properties:
    hibernate:
      format_sql: true  # SQL 쿼리 포맷팅 (가독성 향상)

# ==========================================
# Flyway 데이터베이스 마이그레이션 설정
# ==========================================
flyway:
  enabled: true                        # Flyway 활성화
  locations: classpath:db/migration    # 마이그레이션 스크립트 위치

# ==========================================
# JWT 토큰 설정
# ==========================================
jwt:
  access-token-expiration: ${ACCESS_TOKEN_EXPIRATION}     # Access Token 만료 시간 (밀리초)
                                                          # 개발: 60000 (1분), 운영: 3600000 (1시간)
  refresh-token-expiration: ${REFRESH_TOKEN_EXPIRATION}   # Refresh Token 만료 시간 (밀리초)
                                                          # 개발: 120000 (2분), 운영: 604800000 (7일)

# ==========================================
# 쿠키 보안 설정
# ==========================================
cookie:
  secure: ${COOKIE_SECURE}  # HTTPS에서만 쿠키 전송 여부 (개발: false, 운영: true)

# ==========================================
# AWS S3 설정 (현재 비활성화)
# ==========================================
aws:
  s3:
    enabled: false  # S3 기능 비활성화 상태
    # bucket-name: ${AWS_S3_BUCKET_NAME}    # S3 버킷 이름
    # region: ${AWS_S3_REGION}              # S3 리전
  # credentials:
    # access-key: ${AWS_ACCESS_KEY_ID}      # AWS Access Key
    # secret-key: ${AWS_SECRET_ACCESS_KEY}  # AWS Secret Key

# ==========================================
# 인프라 보안 점검 API 연동 설정
# ==========================================
# CloudDoctor의 AWS 인프라 보안 점검을 수행하는 FastAPI 서비스 주소
infraaudit:
  api:
    url: ${INFRAAUDIT_API_URL}  # 인프라 점검 API 엔드포인트
                                # 개발: http://localhost:8000/api/v1
                                # 운영: https://audit.cloud-doctor.site/api/v1
